{% extends 'base.html.twig' %}

{% block groupSingle %}
	<div class="container-sm">
		<div class="card border border-2">
			<div class="card-body">
				<h5 class="card-title text-center">
					{% if group.getLabel == "Les expensables" %}
						<i class="fa-solid fa-gun fa-shake" style="color: #31c0d3;"></i>
					{% endif %}
					{{ group.getLabel|upper }}
					{% if group.getLabel == "Les expensables" %}
						<i class="fa-solid fa-bomb fa-bounce pl-10" style="color: #ff0008;"></i>
					{% endif %}
				</h5>
				{% if group.getDescription %}
					<p class="card-text">{{ group.getDescription }}</p>
				{% endif %}
			</div>
			<div class="accordion" id="accordionExample">
				<div class="accordion-item">
					<h2 class="accordion-header">
						<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#groupmembers" aria-expanded="true" aria-controls="groupmembers">
							{{ group.getPersons|length }}
							{{ group.getPersons|length > 1 ? "membres": "membre"}}
						</button>
					</h2>
					<div id="groupmembers" class="accordion-collapse collapse show">
						{% for member in group.getBalances %}
							<div class="accordion-body">
								<div class="d-flex justify-content-between">
									<div>
										{{ member.getMember.getFullname|ucWords }}
									</div>
									{% if member.getAmount != 0 %}
										<div>
											<small class={{ member.getAmount > 0 ? "text-success" : "text-danger"}}>
												solde:
											</small>
											{{ member.getAmount == 0 ? "-" : member.getAmount|price('euros')}}
										</div>
									{% endif %}
								</div>
							</div>
						{% endfor %}
					</div>
				</div>
				<div class="accordion-item">
					<h2 class="accordion-header">
						<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#groupexpenses" aria-expanded="true" aria-controls="groupexpenses">
							{{ group.getExpenses|length }}
							{{ group.getExpenses|length > 1 ? 'dépenses' : 'dépense' }}
						</button>
					</h2>
					<div id="groupexpenses" class="accordion-collapse collapsed collapse">
						{% set lastExpenses = group.getExpenses|slice(0,3) %}
						{% for expense in lastExpenses %}
							<div class="accordion-body">
								<div class="d-flex justify-content-between">
									<div>{{ expense.getDescription|capitalize }}</div>
									<div>
										<small class="text-primary">
											montant:
										</small>
										{{ expense.getAmount|price('euros') }}</div>
								</div>
							</div>
						{% endfor %}
						{% if lastExpenses|length < group.getExpenses|length %}
							<button type="button" class="btn btn-info w-100">Voir toutes les dépenses</button>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
